# Volley-Platform-

Volley Platform — единна система за тренировки, упражнения и методика по волейбол.

## Wireframe

Статичният прототип се намира в `index.html` и показва ключовите раздели:
- Начало / Хиро секция
- Карти за Упражнения, Генератор, Методика, Моите тренировки и Форум
- Раздел „Методика и статии” с филтри и примерни статии (публикувана, чака одобрение, чернова)
- Форум, детайл на упражнение, генератор на тренировки и списък с мои тренировки с повече данни (статуси, автори)
- Одобрения за bfv_admin (упражнения, статии, модерация), управление на клубове и бързи сценарии по роли

Добавен е и раздел „Роли в платформата“ с права на platform_admin, bfv_admin и coach, плюс примерни състояния и статуси за всяка роля. В секцията „Демо с Mock API“ има селектор „Преглед по роля“, който показва права и ключови действия според заредените (или примерни) данни от API.

Отворете файла локално в браузър, за да прегледате макета. В секцията „Демо с Mock API“ може да заредите данни от `prototype/mock_api.py` (по подразбиране `http://localhost:8001`). Ако стартирате mock API-то и го отворите в браузър (Accept: text/html), то ще сервира директно `index.html`, така че в хостинг като Render може да получите и UI, и JSON от една услуга.

## Тестване / преглед

### Бързи команди (стъпка по стъпка)
1. Стартирайте mock API (по избор, за да имате живи данни):
   ```bash
   python prototype/mock_api.py
   ```
   - Сървърът слуша на `http://localhost:8001` (или на порта от променливата `PORT`, ако е зададена) и връща JSON за упражнения, тренировки, клубове, роли и чакащи одобрения.
2. Отворете фронтенда:
   - Вариант А: директно в браузър — отворете `index.html` с двойно кликане или „Open File“.
   - Вариант Б: стартирайте лек сървър и отворете `http://localhost:8000/index.html`:
     ```bash
     python -m http.server 8000
     ```
3. В секцията „Демо с Mock API“ натиснете бутона „Зареди данни“ (или изчакайте автоматичното зареждане), за да видите:
   - Упражнения, тренировки и клубове с актуални статуси;
   - Чакащи одобрения, групирани по тип;
   - „Преглед по роля“ с права и действия за platform_admin, bfv_admin и coach.
   - Ако UI и API се обслужват от един и същ адрес (например на Render), полето за API се попълва автоматично с текущия адрес и може да зареждате данни без ръчни промени.
   - Полето за API се запазва в браузъра при успешно зареждане; бутон „Изчисти / локален“ връща стойността към открития домейн
или `http://localhost:8001`.
   - Лентата под бутоните показва последно обновяване и дали данните са от API или fallback.
4. Ако mock API не е стартиран, страницата показва примерни (fallback) данни, за да проверите оформлението.

### Ръчен преглед (кратко резюме)
Ако просто искате визуална проверка без бекенд, отворете `index.html` и преминете през основните панели: навигация, хиро, карти, методика, форум, детайл на упражнение, генератор, „Моите тренировки“, одобрения, клубове и роли. Статусните бейджове остават видими дори без API.

Няма автоматизирани тестове за статичния прототип. За преглед:
- Отворете `index.html` директно в браузър, или
- Стартирайте локален сървър с `python -m http.server 8000` и посетете `http://localhost:8000/index.html`.
- (По желание) Стартирайте mock API: `python prototype/mock_api.py` и натиснете „Зареди данни“ в секцията „Демо с Mock API“ за живи примери.

### Mock API демо
- API панелът показва упражнения, тренировки, клубове (статус + броя треньори срещу лимит), чакащи одобрения и права по роли.
- При недостъпен API се визуализират примерни данни, за да се види структурата.

### Ръчен чеклист
- Навигацията показва всички връзки: Начало, Упражнения, Генератор, Моите тренировки, Методика, Общност, Настройки.
- Хиро секцията съдържа заглавие „Добре дошли в Volley Platform“ и кратко описание.
- Картираните секции за упражнения, генератор, методика и форум са подравнени в мрежа и четими на различни ширини.
- Раздел „Методика и статии“ показва филтри и списък с примерни статии със статуси (Публикувано, Чака одобрение, Чернова).
- Демонстрационните упражнения съдържат маркировки кой ги е предложил/одобрил и какъв е статусът им.
- Раздел „Форум / Общност“ съдържа поне пет категории.
- Детайлът на упражнение включва място за видео/снимка, статус „Одобрено“ и бутон „Добави към тренировка“.
- Генераторът на тренировки показва настройки отляво и три генерирани упражнения с различни статуси.
- Раздел „Моите тренировки“ показва минимум три примерни тренировки със статуси (Запазена, Одобрена, Чернова).
- Блокът „Одобрения (bfv_admin)“ съдържа поне три примера (упражнение, статия, модерация на форум).
- В панела „Клубове“ (Mock API демо) се визуализират минимум два клуба със статус (active/pending), назначен bfv_admin и броя треньори спрямо лимита.
- Блокът „Роли в платформата“ описва правата на platform_admin, bfv_admin и coach, плюс кратки сценарии по роли.

### Сценарии за ръчно тестване по роли
- **platform_admin**: създава нов клуб и назначава bfv_admin; вижда статуси на упражнения и може да публикува официални материали; проверява форума и закрепва тема.
- **bfv_admin**: разглежда секцията „Одобрения“, одобрява предложено упражнение и връща друго за корекции; публикува статия и потвърждава, че се вижда като „Публикувано“; модерира сигнал от форум.
- **coach**: филтрира методика/упражнения, добавя упражнения в генератора и запазва тренировка; предлага ново упражнение/материал (вижда статус „Чака одобрение“); публикува тема във форума.

## Хостване (тестване без локална среда)
Статичният фронтенд (`index.html`) може да бъде качен на всеки статичен хостинг (GitHub Pages, Netlify, Vercel). Ако искате да ползвате и mock API-то, качете `prototype/mock_api.py` отделно на услуга, която позволява дълго работещ Python процес (например Render/Railway/Fly.io) и задайте публичния му URL в браузъра.

**Бележка за зависимости:** проектът няма външни Python библиотеки; `requirements.txt` е празен (с коментари), за да не се чупят платформи като Render при `pip install -r requirements.txt`. Стартирайте директно `python prototype/mock_api.py` без допълнителни пакети.

### Бърз вариант: GitHub Pages (само статичния файл)
1. Създайте публично хранилище и качете `index.html` (и по желание `README.md`).
2. Активирайте **GitHub Pages** (Settings → Pages → Source: Deploy from a branch, папка `/` или `/(root)`).
3. Отворете публикувания URL. Панелът „Демо с Mock API“ ще работи с fallback данни, ако не посочите външно API.

### Бърз вариант: Netlify/Vercel (само статичния файл)
1. Направете нов проект и насочете към хранилището или качете директно `index.html` като „drag & drop“ сайт.
2. Деплойте. Ще получите публичен URL за споделяне; API панелът отново ще ползва fallback, ако няма бекенд.

### Добавяне на външно mock API
1. Деплойте `prototype/mock_api.py` на услуга, която поддържа Python процес/WSGI:
   - Render: нов Web Service, start command `python prototype/mock_api.py`. Платформата подава порта чрез променливата `PORT`, която се използва автоматично.
   - Railway/Fly.io: аналогична конфигурация с публичен порт (напр. 8001 или стойността в `PORT`).
2. След деплой вземете публичния URL, напр. `https://<project>.onrender.com`.
3. Отворете статичния сайт и в панела „Демо с Mock API“ въведете/заменете адреса на API, ако е различен от `http://localhost:8001`, след което натиснете „Зареди данни“. Ако UI и API са на един и същ домейн (примерно Render процес, който сервира и `index.html`, и JSON), полето ще се попълни само с текущия адрес.
4. Ако API не е налично, UI-то остава видимо с примерни данни; при налично API статусните бейджове и списъци се пълнят с живите JSON данни.

## Mock API прототип

За да симулирате данни по роли (упражнения, тренировки, права и чакащи одобрения), стартирайте лек HTTP сървър без допълнителни зависимости:

```
python prototype/mock_api.py
```

По подразбиране ще се отвори на `http://localhost:8001` със следните крайни точки:

- `GET /` — кратък списък с наличните крайни точки (ползвайте го като sanity check след деплой)
- `GET /api` — идентичен списък с крайни точки, ако платформата пренасочва root заявките
- `GET /health` — здравен чек за платформи като Render/Railway
- `GET /api/exercises` — примерни упражнения със статуси (approved, pending, draft)
- `GET /api/trainings` — примерни тренировки със статуси (saved, approved)
- `GET /api/clubs` — примерни клубове с текущ статус (active/pending), назначен bfv_admin и броя треньори срещу лимита
- `GET /api/roles` — права по роли (platform_admin, bfv_admin, coach)
- `GET /api/pending` — чакащи одобрения за упражнения, статии и форумни сигнали (групирани по ключове)

**Content negotiation за UI**
- При заявка към `/` или `/index.html` с Accept `text/html` (например директно от браузър), сървърът връща статичния `index.html`, ако файлът съществува до скрипта. Това позволява един и същ процес да сервира и UI, и API на платформи като Render.
- Ако `index.html` липсва или Accept не включва `text/html`, `/` връща JSON списък с крайните точки (API_INTRO). `/api` винаги връща JSON.

Сървърът изпраща CORS заглавки (Access-Control-Allow-Origin: *) и отговаря на `OPTIONS` заявки, за да може статичният UI
(хостнат на друг домейн/порт) да взема данни без допълнителни проксита.

Можете да използвате тези JSON данни в бъдещ интерактивен фронтенд или Postman за бърза проверка на сценарии.
