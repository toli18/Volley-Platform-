from sqlalchemy.orm import Session

from backend.app import models
from backend.app.database import SessionLocal
from backend.app.security import get_password_hash

CLUBS = [
    "ЦПВК",
    "ВК Локомотив 1929 Нидо",
    "ВК Софийски университет",
    "СКВ Звезди 94",
    "ВК ЦСКА",
    "УВК Хектор",
    "ВК Септември ПроСинема",
    "СК ВАСК",
    "ВК Люлин",
    "КВ при ОСК Славия",
    "СК Славия 2017",
    "СК Барутов волей",
    "ВК Ахил",
    "ВК Левски София",
    "ВК Академик Волей",
    "ВК Владимир Николов",
    "ВК Армеец",
    "ВК Симеонови супер волей",
    "ВК Хебър – Пазарджик",
    "СК Левски 2005 – Карлово",
    "СКВ Родопа – Смолян",
    "ВК Марица – Белово",
    "ВК Велинград Волей",
    "ВК Металик Волей – Сопот",
    "ВК Тополово",
    "ВК Пан – волей – Панагюрище",
    "ВК Марица – Пловдив",
    "ВК Виктория Волей – Пловдив",
    "ПСК Локомотив – Пловдив",
    "ВК Топ Волей – Пещера",
    "ВК Въча – Девин",
    "ВК Асеновград",
    "ВК Локомотив АВИА – Пловдив",
    "ВК Асеновец – Асеновград",
    "ВК Крепост Хисаря",
    "ВК Марица 2022 – Пловдив",
    "ВК Коини Волей – Първомай",
    "СК Ракитово Волей – Костандово",
    "ВК Карлово Волей",
    "ВК Казанлък",
    "ВК Любимец 2010",
    "ВК Яворов – Чирпан",
    "СКВ Тунджа – Ямбол",
    "ВК Раковски – Димитровград",
    "СКВ Сливен Волей",
    "ВК Раднево Волей",
    "ВК Дея спорт – Бургас",
    "ВК Берое 2016 – Стара Загора",
    "ВК Царево",
    "ВК Загорец – Нова Загора",
    "СКВ Берое – Стара Загора",
    "ВК Нефтохимик 2010 – Бургас",
    "СВК Арда – Кърджали",
    "ВК Странджа – Средец",
    "ВК Сливен",
    "ВК Айтос",
    "СК Бургас Волей 2009",
    "ВК Кирково 15",
    "ВК Хеброс – Харманли",
    "СК Гръм в рая – Свиленград",
    "ВК Славейков – Димитровград",
    "ВК Арда 2022 – Кърджали",
    "ВК Бургос волей – Бургас",
    "ВК Бургас – 2007",
    "ВК Ропотомо – Приморско",
    "ВК Хаштаг Бургас",
    "ВК Бийч Волей Бургас",
    "ВК Несебър Волей",
    "ВК Козлодуй – мъже",
    "КВ Раковски – 1964 – Севлиево",
    "ВК Монтана Волей",
    "ВК Севлиево Волей",
    "ВК Царевец 19 – Велико Търново",
    "ВК Ботев – Луковит",
    "ВК Вършец",
    "ВК Бдин – Вида – Видин",
    "СКВ Ботев – Враца",
    "ВК Осъм – Ловеч",
    "ВК Чавдар 1932 – Бяла Слатина",
    "ВК Спартак 1996 – Плевен",
    "СКВ Павликени",
    "ВК Град – Белоградчик",
    "ВК Импулс – Долна Оряховица",
    "ВК Троян волей",
    "ВК Локомотив – Червен бряг",
    "ВК Изгрев – Ябланица",
    "СВК Тетевен Волей",
    "СК Тони спорт – Берковица",
    "СКВ Олимпиец – Плевен",
    "ВК Коко волей 2016 – Новаковци",
    "ВК Бъдин- Волей – Видин",
    "ВК Вел Волей – Велико Търново",
    "ВК Нике – Бяла Слатина",
    "ВК Атом – Козлодуй",
    "СВК Велики Преслав",
    "СКВ Елит – Силистра",
    "СК Вихър – Вълчи дол",
    "СК Перун Варна",
    "СК Йоан Екзарх Български Шумен 05",
    "ВК Хан Аспарух – Исперих",
    "ВК Варна – ДКС",
    "ВК Черноморец Бяла 2008",
    "СК Торо Волей – Варна",
    "ВК Черноломец - Попово 98",
    "ВК Попово 09",
    "ВК Любо Ганев – Автосвят – Русе",
    "ВК Лудогорец – Разград",
    "ВК Омуртаг",
    "ВК Черно море – Варна",
    "СКВ Дунав – Русе",
    "ВК Волов 2020 – Шумен",
    "ВК Родина Суворово",
    "ВК Добруджа 07 – Добрич",
    "СКВ Дием Русе",
    "Русе Волей Клуб",
    "СК Академик Варна",
    "СВК Перун 1 – Варна",
    "СВК Спартак Варна",
    "ВК Бултекс 2013 – Варна",
    "ВК Енерджи – Варна",
    "ВК Сливнишки герой – Сливница",
    "ВК Марек Дупница",
    "ВК Самоков 2009",
    "ВК Медиус Волей – Сандански",
    "ВК Етрополе",
    "ВК Миньор – Перник",
    "ВК Пирин Разлог",
    "ВК Благоевград",
    "ВК Ботев – Ихтиман",
    "СК Волейбол – Пирдоп",
    "ВК Звездец – Горна Малина",
    "ВК Велбъжд – Олимпия – Кюстендил",
    "ВК Ерма 96 – Трън",
    "ВК Металург волей – Перник",
    "ВК Драгоман",
    "ВК Феникс 2024 – Елин Пелин",
]


def seed_all_clubs(db: Session) -> None:
    for club_name in CLUBS:
        c = db.query(models.Club).filter(models.Club.name == club_name).first()
        if not c:
            c = models.Club(name=club_name)
            db.add(c)
            db.commit()
            db.refresh(c)

        for i in range(1, 3):
            email = f"{club_name.lower().replace(' ', '_').replace('–', '').replace('„', '').replace('“', '')}_coach{i}@test.bg"
            exists = db.query(models.User).filter(models.User.email == email).first()
            if exists:
                continue

            coach = models.User(
                email=email,
                name=f"Треньор {i} - {club_name}",
                role=models.UserRole.coach,
                club_id=c.id,
                password_hash=get_password_hash("123456"),
            )
            db.add(coach)
        db.commit()


def run() -> None:
    db: Session = SessionLocal()
    try:
        seed_all_clubs(db)
    finally:
        db.close()


if __name__ == "__main__":
    run()
